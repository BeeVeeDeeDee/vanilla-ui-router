{"version":3,"file":null,"sources":["../index.js"],"sourcesContent":["export const createRouter = domEntryPoint => {\n\tlet routes = {};\n\n\tconst getRouterObject = () => {\n\t\treturn { addRoute, otherwise };\n\t}\n\n\tconst addRoute = (hashUrl, routeHandler) => {\n\t\troutes[hashUrl] = routeHandler;\n\t\treturn getRouterObject();\n\t};\n\n\tconst otherwise = routeHandler => {\n\t\troutes['*'] = routeHandler;\n\t};\n\n\tconst parseRouteParamToCorrectType = paramValue => {\n\t\tif(!isNaN(paramValue)) {\n\t\t\treturn parseInt(paramValue, 10);\n\t\t}\n\n\t\tif (paramValue === 'true' || paramValue === 'false') {\n\t\t\treturn JSON.parse(paramValue);\n\t\t}\n\n\t\treturn paramValue;\n\t};\n\n\tconst findMatchingRouteIdentifier = (currentHash, routeKeys) => {\n\t  const splittedHash = currentHash.split('/');\n\t  const firstHashToken = splittedHash[0];\n\n\t  return routeKeys\n\t    .filter(routeKey => {\n\t      const splittedRouteKey = routeKey.split('/');\n\n\t      const staticRouteTokensAreEqual = splittedRouteKey\n\t        .map((routeToken, i) => {\n\t          if(routeToken.indexOf(':', 0) !== -1) return true;\n\t          return routeToken === splittedHash[i];\n\t        })\n\t        .reduce((countInvalid, currentValidationState) => {\n\t          if (currentValidationState === false) {\n\t            ++countInvalid;\n\t          }\n\t          return countInvalid;\n\t        }, 0) === 0;\n\n\t      return routeKey.indexOf(firstHashToken, 0) !== -1 &&\n\t             staticRouteTokensAreEqual &&\n\t             splittedHash.length === splittedRouteKey.length;\n\t    })[0];\n\t};\n\n\tconst extractRouteParams = (routeIdentifier, currentHash) => {\n\t  const splittedHash = currentHash.split('/');\n\t  const splittedRouteIdentifier = routeIdentifier.split('/');\n\n\t  return splittedRouteIdentifier\n\t    .map((routeIdentifierToken, index) => {\n\t      if (routeIdentifierToken.indexOf(':', 0) === -1) return null;\n\t        const routeParam = {};\n\t        const key = routeIdentifierToken.substr(1, routeIdentifierToken.length - 1);\n\t        routeParam[key] = splittedHash[index];\n\t        return routeParam;\n\t    })\n\t    .filter(p => p !== null)\n\t    .reduce((acc, curr) => {\n\t      Object.keys(curr).forEach(key => {\n\t        acc[key] = parseRouteParamToCorrectType(curr[key]);\n\t      })\n\t      return acc;\n\t    }, {});\n\t};\n\n\tconst handleRouting = () => {\n\t\tconst defaultRouteIdentifier = '*';\n\t\tconst currentHash = location.hash.slice(1);\n\n\t\tconst maybeMatchingRouteIdentifier = findMatchingRouteIdentifier(currentHash, Object.keys(routes));\n\t  let routeParams;\n\t\tif (maybeMatchingRouteIdentifier) {\n\t\t\trouteParams = extractRouteParams(maybeMatchingRouteIdentifier, currentHash);\n\t\t}\n\n\t\tconst routeHandler = Object.keys(routes).indexOf(maybeMatchingRouteIdentifier) !== -1 ? routes[maybeMatchingRouteIdentifier] : routes[defaultRouteIdentifier];\n\n\t\tif (typeof routeHandler === 'function') {\n\t\t\trouteHandler(domEntryPoint, routeParams);\n\t\t}\n\t};\n\n\tif (window) {\n\t\twindow.removeEventListener('hashchange', handleRouting);\n\t\twindow.addEventListener('hashchange', handleRouting);\n\t\twindow.removeEventListener('load', handleRouting);\n\t\twindow.addEventListener('load', handleRouting);\n\t}\n\n\treturn getRouterObject();\n};\n"],"names":["createRouter","routes","getRouterObject","addRoute","otherwise","hashUrl","routeHandler","parseRouteParamToCorrectType","isNaN","paramValue","parseInt","JSON","parse","findMatchingRouteIdentifier","currentHash","routeKeys","splittedHash","split","firstHashToken","filter","splittedRouteKey","routeKey","staticRouteTokensAreEqual","map","routeToken","i","indexOf","reduce","countInvalid","currentValidationState","length","extractRouteParams","routeIdentifier","splittedRouteIdentifier","routeIdentifierToken","index","routeParam","key","substr","p","acc","curr","keys","forEach","handleRouting","defaultRouteIdentifier","location","hash","slice","maybeMatchingRouteIdentifier","Object","routeParams","domEntryPoint","window","removeEventListener","addEventListener"],"mappings":"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"}